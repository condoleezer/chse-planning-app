<div
  class="flex flex-row items-center justify-between border-b h-14 px-5 fixed w-full bg-primary z-10"
  [ngClass]="{
    'role-cadre': user?.role === 'cadre',
    'role-nurse': user?.role === 'nurse'
  }"
>
  <div class="h-24 w-24 mt-10">
    <img src="assets/logo/chse.png" alt="logo" />
  </div>

  <!-- Ajout de la date centrée -->
  <div class="flex-1 text-center">
    <p class="font-bold text-lg text-black">
      {{ today | date : "EEEE d MMMM yyyy" | titlecase }}
    </p>
  </div>

  <div class="flex flex-row items-center gap-5">
    <p class="font-medium">
      {{ userRole !== null ? userRole : "Utilisateur" }}
    </p>
    <p-avatar
      [label]="userName !== null ? userName : 'N/A'"
      styleClass="mr-2 cursor-pointer"
      [style]="{ 'background-color': '#ffffff', color: '#2a1261' }"
      shape="circle"
      (click)="menu.toggle($event)"
    />
    <p-menu #menu [model]="menuItems" [popup]="true"></p-menu>
    <!-- Visible logout button for convenience -->
    <button
      (click)="logout()"
      class="ml-2 px-3 py-1 rounded text-white font-semibold bg-button hover:opacity-90"
    >
      Déconnexion
    </button>
  </div>
</div>

<!-- Modale pour le profil -->
<p-dialog
  header="Profil Utilisateur"
  [(visible)]="displayProfileModal"
  [modal]="true"
  [style]="{ width: '30vw' }"
  [draggable]="false"
  [resizable]="false"
>
  <div class="flex flex-col items-center p-4">
    <div class="mt-3" *ngIf="user">
      <p><strong>Nom :</strong> {{ user.first_name.toUpperCase() }}</p>
      <p class="mt-2">
        <strong>Prénom :</strong> {{ user.last_name.toUpperCase() }}
      </p>
      <p class="mt-2"><strong>Téléphone :</strong> {{ user.phoneNumber }}</p>
      <p class="mt-2"><strong>Email :</strong> {{ user.email }}</p>
      <p class="mt-2">
        <strong>Rôle :</strong>
        {{
          user.role === "admin"
            ? "Administrateur"
            : user.role === "cadre"
            ? "Cadre de Santé"
            : "Agent de Santé"
        }}
      </p>
    </div>
    <button class="mt-3 text-blue-900 underline" (click)="closeProfileModal()">
      Fermer
    </button>
  </div>
</p-dialog>
